<?xml version="1.0" encoding="UTF-8"?>
<project name="flexAnt" default="build" basedir="./">
	<description>
		FlexAntを用いてAirのコンパイルを行います
	</description>

	<!-- Hudsonの提供する環境変数を設定(実際にはこのbuild.xmlでは使われない) -->
	<property environment="env" />

	<!-- 各種プロパティ定義 -->

	<!-- プロジェクトのベースディレクトリ定義 -->
	<dirname property="XML_DIR" file="${ant.file}"/>
	<property name="APP_ROOT" value="${XML_DIR}/../"/>
	
	<!-- FlexSDKのホーム -->
	<property name="FLEX_HOME" value="/opt/flex/flex_sdk_3.4.0.9271"/>

	<!-- アプリケーションの名前 -->
	<property name="APP_NAME" value="HatarakiZakari"/>

	<!-- flex用Antタスクを読み込む -->
	<taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar"/>

	<!-- mxmlcの実行 -->
	<target name="build">
		<mkdir dir="${APP_ROOT}/bin" />
		<mxmlc file="${APP_ROOT}/src/${APP_NAME}.mxml" output="${APP_ROOT}/bin/${APP_NAME}.swf">
			<load-config filename="${FLEX_HOME}/frameworks/flex-config.xml"/>
			<load-config filename="${APP_ROOT}/build/flex-config.xml"/>
			<source-path path-element="${FLEX_HOME}/frameworks"/>
		</mxmlc>
	</target>

	<!-- cleanの実行 -->
	<target name="clean">
		<delete dir="${APP_ROOT}/bin" />
	</target>
</project>
